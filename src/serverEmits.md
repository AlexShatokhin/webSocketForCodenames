

---

# Socket.io Server Emits

## Эмиты на стороне сервера

### `get-rooms`

**Описание:**  
Получение списка комнат.

**Когда отрабатывает:**  
Когда сервер отправляет клиенту список всех доступных комнат.

**Возвращаемые данные:**  
- `rooms` (массив объектов) — массив данных о комнатах. Пример:
  ```json
  [
    {
        "cardset": "[{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]"
        "id": "bbb34f55-d31a-4941-8e60-142d4b745897"
        "name": "4233"
        "users": "[{…}, {…}]"
        "usersInRoom": "2"
    },
    ...
  ]
  ```

### `send-cards`

**Описание:**  
Отправка списка карточек клиенту.

**Когда отрабатывает:**  
Когда сервер отправляет клиенту список карточек.

**Возвращаемые данные:**  
- `cards` (массив объектов) — массив карточек. Пример:
  ```json
  [
        {word: 'БОРТ', teamName: 'blue', isClicked: false}
        {word: 'ПОЧКА', teamName: 'neutral', isClicked: false}
        {word: 'ГВОЗДЬ', teamName: 'neutral', isClicked: false}
        {word: 'ПЕРО', teamName: 'red', isClicked: false}
        {word: 'АМФИБИЯ', teamName: 'red', isClicked: false}
        {word: 'БРАК', teamName: 'red', isClicked: false}
        {word: 'ТАКТ', teamName: 'blue', isClicked: false}
        {word: 'СОБАКА', teamName: 'blue', isClicked: false}
        {word: 'КОСЯК', teamName: 'black', isClicked: false}
  ]
  ```

### `game-started`

**Описание:**  
Уведомление о начале игры.

**Когда отрабатывает:**  
Когда игра успешно запущена.

**Возвращаемые данные:**  
Нет.

### `error`

**Описание:**  
Отправка сообщения об ошибке.

**Когда отрабатывает:**  
Когда происходит ошибка.

**Возвращаемые данные:**  
- `error` (объект) — объект ошибки, содержащий сообщение и код ошибки. Примеры:
  ```json
  {
    "message": "Не все пользователи выбрали команду или команды не полные",
    "code": 403
  }
  ```
  ```json
  {
    "message": "Password is incorrect",
    "code": 401
  }
  ```
  ```json
  {
    "message": "User or room not found",
    "code": 404
  }
  ```
  ```json
  {
    "message": "User has no team",
    "code": 403
  }
  ```
  ```json
  {
    "message": "Team already has a captain",
    "code": 409
  }
  ```
  ```json
  {
    "message": "User not found",
    "code": 404
  }
  ```

### `update-room`

**Описание:**  
Обновление информации о комнате.

**Когда отрабатывает:**  
Когда информация о комнате обновляется.

**Возвращаемые данные:**  
- `roomInfo` (объект) — обновленная информация о комнате. Пример:
  ```json
    {
        cardset: [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]
        id: "bbb34f55-d31a-4941-8e60-142d4b745897"
        name: "4233"
        users: [{…}, {…}]
        usersInRoom: 2
    }
  ```

### `leave-from-room`

**Описание:**  
Уведомление о выходе из комнаты.

**Когда отрабатывает:**  
Когда пользователь покидает комнату.

**Возвращаемые данные:**  
Нет.

### `get-user-info`

**Описание:**  
Получение информации о пользователе.

**Когда отрабатывает:**  
Когда сервер отправляет клиенту информацию о пользователе.

**Возвращаемые данные:**  
- `userInfo` (объект) — информация о пользователе. Пример:
  ```json
    {
        id,
        name,
        room,
        team,
        role
    }
  ```

### `toggle-roles`

**Описание:**  
Переключение ролей пользователей.

**Когда отрабатывает:**  
Когда роли пользователей переключаются.

**Возвращаемые данные:**  
Нет.

---
